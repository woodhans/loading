/*! author Hans.Wu http://www.hanswu.com
 * project: https://github.com/woodhans/loading
 require jquery 1.6+*/
(function(a,b,c){var d=function(){return{a:function(b,c){t=this;t.o=c;t.m=b;typeof(c.G)=="function"&&c.G.call();if(c.cancel){j=[];$(document).on("keydown",function(e){e.keyCode==27&&j.push(new Date().getTime());j.length>=2&&(j[j.length-1]-j[j.length-2]<2500)&&t.v()})}t.k()},k:function(){t=this;t.g();t.l(0)},l:function(i){t=this;n=t.o.A.length;if(t.u(t.o.A[i])){$.ajax({url:t.o.A[i],async:!1,success:function(){i++;t.b(i,n)},error:function(){i++;t.b(i,n)}})}else{i++;t.b(i,n)}},b:function(i,n){t=this;t.o.D&&t.m.find(".loading-percent").html("<span>"+parseInt(i/n*100)+"</span> %");t.o.F&&t.m.find(".loading-img img").data("percent",parseInt(i/n*100)+"%");t.o.E&&t.m.find(".loading-animate").width((i/n*100)+"%");if(t.o.H){t.m.find(".loading-custom").data("percent",parseInt(i/n*100)+"%");typeof(t.o.H)=="function"&&t.o.H.call()}if(i==n){t.o.D&&t.m.find(".loading-percent").html("<span>100</span> %");t.o.F&&t.m.find(".loading-img img").data("percent","100%");t.o.E&&t.m.find(".loading-animate").width("100%");setTimeout(function(){t.f()},50)}else{setTimeout(function(){t.l(i)},10)}},g:function(){t=this;h=[];h.push("<div class='loading-wrapper'><div class='loading-inner'>");t.o.F&&h.push("<div class='loading-img'><img src='"+(typeof(t.o.F)=="string"&&t.u(t.o.F)=="IMG"?""+t.o.F+"":"./loading.gif")+"'/></div>");t.o.E&&h.push("<div class='loading-animate-bg'><div class='loading-animate'></div></div>");t.o.D&&h.push("<div class='loading-percent'></div>");t.o.C&&h.push("<div class='loading-time'></div>");t.o.H&&h.push("<div class='loading-custom'></div>");h.push("</div></div>");t.m.addClass("loading-body").append(h.join(''));if(t.o.C){start=0;t.n=setInterval(function(){start+=.1;t.m.find(".loading-time").html("<span>"+start.toFixed(1)+"</span> s")},100)}},f:function(){t=this;clearTimeout();if(t.o.C)clearInterval(t.n);t.m.removeClass("loading-body").find('.loading-wrapper').remove();typeof(t.o.B)=="function"&&t.o.B.call()},v:function(){t=this;t.f();$(document).off("keydown");typeof(t.o.I)=="function"&&t.o.I.call()},u:function(s){p=s.split('.').pop().toLowerCase();return/^(jpg|gif|png|jpeg|ico)/.test(p)?"IMG":/^(mp3|ogg|wav)/.test(p)?"AUDIO":/^(mp4|webm)/.test(p)?"VIDEO":/^css/.test(p)?"STYLE":/^js/.test(p)?"SCRIPT":!1}}};$.fn.loading=function(s){s=$.extend({},$.fn.loading.s,s);s.A=s.items;s.B=s.loaded;s.C=s.loadingTime;s.D=s.loadingPercent;s.E=s.loadingAnimate;s.F=s.loadingImg;s.H=s.customAnimate;s.G=s.beforeLoading;s.I=s.cancel;if(typeof(s.B)!="function")s.B=null;if(typeof(s.A)=="string")s.A=s.toLowerCase().split("A");if(!Array.isArray(s.A))s.A=[];e=new d();e.a(this,s)};$.fn.loading.s={items:[],loaded:null,loadingTime:!1,loadingPercent:!0,loadingAnimate:!0,loadingImg:!0,customAnimate:!1,beforeLoading:null,cancel:!1}}(jQuery,window,document));